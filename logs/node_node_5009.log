[2024-11-17 13:17:09,488] [INFO] [Blockchain] Creating genesis block.
[2024-11-17 13:17:09,488] [DEBUG] [Blockchain] Genesis block created: {
    "user_id": "genesis",
    "previous_hash": "0",
    "transaction": "Genesis Block",
    "commitment": "genesis_commitment",
    "timestamp": 1,
    "nonce": "nonce",
    "hash": "45c01128a000954fabe165f58e7f58c70fa5860f007c8f70eade6a8ac39a3b66"
}
[2024-11-17 13:17:09,488] [DEBUG] [Blockchain] Retrieving peer nodes for 'node_5009'.
[2024-11-17 13:17:09,490] [DEBUG] [Blockchain] Peer nodes from file: ['127.0.0.1:5000', '127.0.0.1:5001', '127.0.0.1:5002', '127.0.0.1:5003', '127.0.0.1:5004', '127.0.0.1:5005', '127.0.0.1:5006', '127.0.0.1:5007', '127.0.0.1:5008']
[2024-11-17 13:17:09,490] [DEBUG] [Blockchain] Loading consensus algorithm: PoWConsensus
[2024-11-17 13:17:09,492] [INFO] [Blockchain] Consensus algorithm 'PoWConsensus' loaded successfully.
[2024-11-17 13:17:09,492] [DEBUG] [PoWConsensus] Initialized with DIFFICULTY: 4 and reward: 10
[2024-11-17 13:17:09,492] [DEBUG] [Blockchain] Initialized reputation_tokens: {'node_5009': 10, 'node_5000': 10, 'node_5001': 10, 'node_5002': 10, 'node_5003': 10, 'node_5004': 10, 'node_5005': 10, 'node_5006': 10, 'node_5007': 10, 'node_5008': 10}
[2024-11-17 13:17:09,493] [DEBUG] [Blockchain] Initialized with node_id: node_5009, data_dir: node_data\node_node_5009
[2024-11-17 13:17:09,493] [DEBUG] [Blockchain] Peer nodes: ['127.0.0.1:5000', '127.0.0.1:5001', '127.0.0.1:5002', '127.0.0.1:5003', '127.0.0.1:5004', '127.0.0.1:5005', '127.0.0.1:5006', '127.0.0.1:5007', '127.0.0.1:5008']
[2024-11-17 13:17:09,493] [DEBUG] [Blockchain] Consensus algorithm: PoWConsensus
[2024-11-17 13:17:09,499] [INFO] Starting Flask server on port 5009
 * Serving Flask app 'app'
 * Debug mode: on
[2024-11-17 13:17:09,527] [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5009
[2024-11-17 13:17:09,527] [INFO] [33mPress CTRL+C to quit[0m
[2024-11-17 16:51:29,913] [DEBUG] Entered /register endpoint
[2024-11-17 16:51:29,918] [DEBUG] Received registration data: {'userId': '1694776', 'hashedPassword': 8573954}
[2024-11-17 16:51:29,918] [INFO] User 1694776 registered successfully.
[2024-11-17 16:51:29,921] [DEBUG] [Blockchain] Last block retrieved: {
    "user_id": "genesis",
    "previous_hash": "0",
    "transaction": "Genesis Block",
    "commitment": "genesis_commitment",
    "timestamp": 1,
    "nonce": "nonce",
    "hash": "45c01128a000954fabe165f58e7f58c70fa5860f007c8f70eade6a8ac39a3b66"
}
[2024-11-17 16:51:29,926] [INFO] [node_select] Initial nonce selected: 9104434 for node_5009
[2024-11-17 16:51:30,891] [DEBUG] Entered /select_node endpoint
[2024-11-17 16:51:30,906] [DEBUG] Received select_node data: {'consensus_id': 'node_5006', 'stop_time': 1731842490.347111}
[2024-11-17 16:51:30,906] [INFO] Received selection completion notification with ID: node_5006
[2024-11-17 16:51:30,921] [INFO] [stop_selection] Stopping mining as another node found a block earlier.
[2024-11-17 16:51:30,930] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:30] "POST /select_node HTTP/1.1" 200 -
[2024-11-17 16:51:30,930] [INFO] [node_select] Mining stopped before a valid block was found.
[2024-11-17 16:51:30,931] [WARNING] [Blockchain] Current node did not mine a block.
[2024-11-17 16:51:30,931] [DEBUG] None
[2024-11-17 16:51:30,932] [ERROR] Failed to add registration block.
[2024-11-17 16:51:30,932] [DEBUG] Entered /select_node endpoint
[2024-11-17 16:51:30,933] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:30] "[35m[1mPOST /register HTTP/1.1[0m" 500 -
[2024-11-17 16:51:30,933] [DEBUG] Received select_node data: {'consensus_id': 'node_5004', 'stop_time': 1731842490.2771106}
[2024-11-17 16:51:30,934] [DEBUG] Entered /select_node endpoint
[2024-11-17 16:51:30,935] [INFO] Received selection completion notification with ID: node_5004
[2024-11-17 16:51:30,936] [INFO] [stop_selection] Stopping mining as another node found a block earlier.
[2024-11-17 16:51:30,936] [DEBUG] Received select_node data: {'consensus_id': 'node_5008', 'stop_time': 1731842490.2351108}
[2024-11-17 16:51:30,935] [DEBUG] Entered /select_node endpoint
[2024-11-17 16:51:30,937] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:30] "POST /select_node HTTP/1.1" 200 -
[2024-11-17 16:51:30,938] [INFO] Received selection completion notification with ID: node_5008
[2024-11-17 16:51:30,940] [INFO] [stop_selection] Stopping mining as another node found a block earlier.
[2024-11-17 16:51:30,939] [DEBUG] Received select_node data: {'consensus_id': 'node_5005', 'stop_time': 1731842490.4891105}
[2024-11-17 16:51:30,940] [DEBUG] Entered /select_node endpoint
[2024-11-17 16:51:30,939] [DEBUG] Entered /select_node endpoint
[2024-11-17 16:51:30,940] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:30] "POST /select_node HTTP/1.1" 200 -
[2024-11-17 16:51:30,940] [INFO] Received selection completion notification with ID: node_5005
[2024-11-17 16:51:30,941] [INFO] [stop_selection] Stopping mining as another node found a block earlier.
[2024-11-17 16:51:30,941] [DEBUG] Received select_node data: {'consensus_id': 'node_5001', 'stop_time': 1731842490.4681108}
[2024-11-17 16:51:30,941] [DEBUG] Received select_node data: {'consensus_id': 'node_5007', 'stop_time': 1731842490.793538}
[2024-11-17 16:51:30,942] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:30] "POST /select_node HTTP/1.1" 200 -
[2024-11-17 16:51:30,942] [INFO] Received selection completion notification with ID: node_5001
[2024-11-17 16:51:30,942] [INFO] [stop_selection] Stopping mining as another node found a block earlier.
[2024-11-17 16:51:30,942] [INFO] Received selection completion notification with ID: node_5007
[2024-11-17 16:51:30,943] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:30] "POST /select_node HTTP/1.1" 200 -
[2024-11-17 16:51:30,945] [INFO] [stop_selection] Stopping mining as another node found a block earlier.
[2024-11-17 16:51:30,945] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:30] "POST /select_node HTTP/1.1" 200 -
[2024-11-17 16:51:31,062] [DEBUG] Entered /receive_block endpoint
[2024-11-17 16:51:31,062] [DEBUG] Received block data: {'user_id': '1694776', 'previous_hash': '45c01128a000954fabe165f58e7f58c70fa5860f007c8f70eade6a8ac39a3b66', 'transaction': {'action': 'register'}, 'nonce': 6508749, 'commitment': None, 'timestamp': 1731842490.2351108, 'consensus_node': 'node_5008'}
[2024-11-17 16:51:31,062] [DEBUG] Constructed new block: {
    "user_id": "1694776",
    "previous_hash": "45c01128a000954fabe165f58e7f58c70fa5860f007c8f70eade6a8ac39a3b66",
    "transaction": {
        "action": "register"
    },
    "commitment": null,
    "timestamp": 1731842490.2351108,
    "nonce": 6508749,
    "hash": "000023fdbc39934f1d52a38186af042b2f8e9dbfb1a08fd1782551345002b811"
}
[2024-11-17 16:51:31,063] [DEBUG] [Blockchain] Last block retrieved: {
    "user_id": "genesis",
    "previous_hash": "0",
    "transaction": "Genesis Block",
    "commitment": "genesis_commitment",
    "timestamp": 1,
    "nonce": "nonce",
    "hash": "45c01128a000954fabe165f58e7f58c70fa5860f007c8f70eade6a8ac39a3b66"
}
[2024-11-17 16:51:31,063] [DEBUG] [validate_block] New block data:
[2024-11-17 16:51:31,063] [DEBUG] {
    "user_id": "1694776",
    "previous_hash": "45c01128a000954fabe165f58e7f58c70fa5860f007c8f70eade6a8ac39a3b66",
    "transaction": {
        "action": "register"
    },
    "commitment": null,
    "timestamp": 1731842490.2351108,
    "nonce": 6508749,
    "hash": "000023fdbc39934f1d52a38186af042b2f8e9dbfb1a08fd1782551345002b811"
}
[2024-11-17 16:51:31,063] [DEBUG] [validate_block] Last block data:
[2024-11-17 16:51:31,063] [DEBUG] {
    "user_id": "genesis",
    "previous_hash": "0",
    "transaction": "Genesis Block",
    "commitment": "genesis_commitment",
    "timestamp": 1,
    "nonce": "nonce",
    "hash": "45c01128a000954fabe165f58e7f58c70fa5860f007c8f70eade6a8ac39a3b66"
}
[2024-11-17 16:51:31,063] [INFO] [validate_block] Block validated. Reputation tokens for node_5008 increased by 10.
[2024-11-17 16:51:31,063] [INFO] [process_new_block] Block added by 1694776 to the blockchain.
[2024-11-17 16:51:31,063] [DEBUG] [process_new_block] Updated reputation tokens: {'node_5009': 10, 'node_5000': 10, 'node_5001': 10, 'node_5002': 10, 'node_5003': 10, 'node_5004': 10, 'node_5005': 10, 'node_5006': 10, 'node_5007': 10, 'node_5008': 20}
[2024-11-17 16:51:31,063] [DEBUG] [Blockchain] Updating metrics with new block: {
    "user_id": "1694776",
    "previous_hash": "45c01128a000954fabe165f58e7f58c70fa5860f007c8f70eade6a8ac39a3b66",
    "transaction": {
        "action": "register"
    },
    "commitment": null,
    "timestamp": 1731842490.2351108,
    "nonce": 6508749,
    "hash": "000023fdbc39934f1d52a38186af042b2f8e9dbfb1a08fd1782551345002b811"
}
[2024-11-17 16:51:31,063] [DEBUG] [Blockchain] Block time: 1731842489.2351108 seconds.
[2024-11-17 16:51:31,063] [DEBUG] [Blockchain] Transactions per block updated: [1]
[2024-11-17 16:51:31,063] [DEBUG] [Blockchain] Block size: 293 bytes.
[2024-11-17 16:51:31,063] [DEBUG] [Blockchain] Total blockchain size: 293 bytes.
[2024-11-17 16:51:31,063] [DEBUG] [Blockchain] Current difficulty: 4
[2024-11-17 16:51:31,063] [INFO] Block added successfully from node node_5008.
[2024-11-17 16:51:31,064] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:31] "POST /receive_block HTTP/1.1" 200 -
[2024-11-17 16:51:31,083] [DEBUG] Entered /initiate_zkp endpoint
[2024-11-17 16:51:31,083] [DEBUG] Received initiate_zkp data: {'userId': '1694776', 'T': 6}
[2024-11-17 16:51:31,083] [INFO] Commitment T stored for user 1694776.
[2024-11-17 16:51:31,084] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:31] "POST /initiate_zkp HTTP/1.1" 200 -
[2024-11-17 16:51:31,110] [DEBUG] Entered /verify_zkp endpoint
[2024-11-17 16:51:31,110] [DEBUG] Received verify_zkp data: {'userId': '1694776', 's': 9, 'challenge': 6}
[2024-11-17 16:51:31,110] [INFO] ZKP verified for user 1694776. Token issued: {'user_id': '1694776', 'node_id': '127.0.0.1:5009', 'exp': datetime.datetime(2024, 11, 17, 11, 26, 31, 110008)}
[2024-11-17 16:51:31,110] [INFO] 127.0.0.1 - - [17/Nov/2024 16:51:31] "POST /verify_zkp HTTP/1.1" 200 -
